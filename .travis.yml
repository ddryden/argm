# Heavily influenced by https://github.com/aggregateknowledge/postgresql-hll/blob/master/.travis.yml

language: c

env:
  - PGVERSION=9.3
  - PGVERSION=9.4
  - PGVERSION=9.5
  - PGVERSION=9.6

before_script:
  - lsb_release -d
  - apt-cache search postgresql-server-dev
  - export PATH=/usr/lib/postgresql/$PGVERSION/bin:$PATH
  - sudo /etc/init.d/postgresql stop                         # Stop any running version of postgres
  - sudo /etc/init.d/postgresql start $PGVERSION             # Start the version of PG that we want
  - sudo apt-get install postgresql-server-dev-$PGVERSION    # Required for building the extension
  - sudo apt-get install postgresql-common
  - createdb argm_test

script: 
  - make
  - sudo make install
  - make installcheck
  - psql -c "create extension argm" argm_test


